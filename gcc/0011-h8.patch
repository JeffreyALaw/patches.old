diff --git a/gcc/config/h8300/h8300.c b/gcc/config/h8300/h8300.c
index 511c2b28e40..d8b4bfcbdbe 100644
--- a/gcc/config/h8300/h8300.c
+++ b/gcc/config/h8300/h8300.c
@@ -1947,9 +1947,10 @@ h8300_select_cc_mode (enum rtx_code cond, rtx op0, rtx op1)
   if (op1 == const0_rtx
       && (cond == EQ || cond == NE || cond == LT || cond == GE)
       && (GET_CODE (op0) == PLUS || GET_CODE (op0) == MINUS
-          || GET_CODE (op0) == NEG || GET_CODE (op0) == AND
-          || GET_CODE (op0) == IOR || GET_CODE (op0) == XOR
-          || GET_CODE (op0) == NOT || GET_CODE (op0) == ASHIFT
+	  || GET_CODE (op0) == NEG || GET_CODE (op0) == AND
+	  || GET_CODE (op0) == IOR || GET_CODE (op0) == XOR
+	  || GET_CODE (op0) == NOT || GET_CODE (op0) == ASHIFT
+	  || GET_CODE (op0) == ASHIFTRT || GET_CODE (op0) == LSHIFTRT
 	  || GET_CODE (op0) == MULT || GET_CODE (op0) == SYMBOL_REF
 	  || GET_CODE (op0) == SIGN_EXTEND || GET_CODE (op0) == ZERO_EXTEND
 	  || REG_P (op0) || MEM_P (op0)))
diff --git a/gcc/config/h8300/shiftrotate.md b/gcc/config/h8300/shiftrotate.md
index 23140d9ade8..ac0050b3683 100644
--- a/gcc/config/h8300/shiftrotate.md
+++ b/gcc/config/h8300/shiftrotate.md
@@ -18,33 +18,13 @@
 ;; easier "do it at insn emit time" route.
 
 
-(define_expand "ashl<mode>3"
+(define_expand "<code><mode>3"
   [(set (match_operand:QHSI 0 "register_operand" "")
-	(ashift:QHSI (match_operand:QHSI 1 "register_operand" "")
+	(shifts:QHSI (match_operand:QHSI 1 "register_operand" "")
 		     (match_operand:QI 2 "nonmemory_operand" "")))]
   ""
   {
-    if (expand_a_shift (<MODE>mode, ASHIFT, operands))
-    DONE;
-  })
-
-(define_expand "ashr<mode>3"
-  [(set (match_operand:QHSI 0 "register_operand" "")
-	(ashiftrt:QHSI (match_operand:QHSI 1 "register_operand" "")
-		       (match_operand:QI 2 "nonmemory_operand" "")))]
-  ""
-  {
-    if (expand_a_shift (<MODE>mode, ASHIFTRT, operands))
-    DONE;
-  })
-
-(define_expand "lshr<mode>3"
-  [(set (match_operand:QHSI 0 "register_operand" "")
-	(lshiftrt:QHSI (match_operand:QHSI 1 "register_operand" "")
-		       (match_operand:QI 2 "nonmemory_operand" "")))]
-  ""
-  {
-    if (expand_a_shift (<MODE>mode, LSHIFTRT, operands))
+    if (expand_a_shift (<MODE>mode, <CODE>, operands))
     DONE;
   })
 
